# Setting up GitHub Copilot Custom Instructions

All configuration can be done on user level (for all your codebases) or workspace level (for a specific codebase).

If you define custom instructions in both the `.github/copilot-instructions.md` file and in settings, Copilot tries to combine instructions from both sources.

> **Note:** Custom instructions for code generation are not used for code completions and are only used in chat.

## 1. Enable support for YAML and Markdown files

1. Select the `Preferences: Open User / Workspace Settings` command in the Command Palette (<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd>)
2. Add the following:

```json
"github.copilot.enable": {
  "*": true,
  "yaml": true,
  "markdown": true
}
```

## 2. Configure Instructions File (Workspace level only)

1. Add `copilot-instructions.md` file in `.github` folder (create one if it doesn't exist in the root folder)
   - See example in [2a.INSTRUCTIONS_EXAMPLE.md](2a.INSTRUCTIONS_EXAMPLE.md)

2. Enable instruction file:
   - Open Settings (<kbd>⌘</kbd>+<kbd>,</kbd> on Mac / <kbd>Ctrl</kbd>+<kbd>,</kbd> on Windows/Linux)
   - Search for "instruction file"
   - Enable checkbox under "Code Generation: Use Instruction Files"

## 3. Customize Instructions by Task Type

You can customize instructions either at user level or workspace level:

1. Open Settings (<kbd>⌘</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> on Mac / <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> on Windows)
2. Search for `Preferences: Open User / Workspace Settings (JSON)`
3. Add settings to customize instructions for different tasks
   - You can add text or file reference

| Type of instruction | Setting name |
|:-------------------|:-------------|
| Code generation | `github.copilot.chat.codeGeneration.instructions` |
| Test generation | `github.copilot.chat.testGeneration.instructions` |
| Code review | `github.copilot.chat.reviewSelection.instructions` |
| Commit message generation | `github.copilot.chat.commitMessageGeneration.instructions` |
| Pull request title and description generation | `github.copilot.chat.pullRequestDescriptionGeneration.instructions` |

### Example Configuration

```json
{
  "github.copilot.chat.codeGeneration.instructions": [
    {
      "text": "Always add a comment: 'Generated by Copilot'."
    },
    {
      "text": "In TypeScript always use underscore for private field names."
    },
    {
      "file": "general.instructions.md" // import instructions from file `general.instructions.md`
    },
    {
      "file": "db.instructions.md" // import instructions from file `db.instructions.md`
    }
  ]
}
```

### Tips

- Keep instructions short and clear - one simple statement per instruction
- Each instruction should be self-contained and not reference external standards 
- Store instructions in external files to easily share with team
- Version control instruction files to track changes
- Split instructions into multiple topic-specific files
- Add multiple file references in settings for better organization

## 4. Project Documentation

### Planning File
Create `PLANNING.md` (or similar) to document:
- Project goals and overview
- Architecture
- Project structure
- Core components
- Style guides
- Getting started guide for new contributors

See example in [2b.PLANNING_EXAMPLE.md](2b.PLANNING_EXAMPLE.md)

### Tasks File (Optional)
Create `TASKS.md` to track:
- Pending tasks
- Work in progress
- Personal notes
- Can be added to `.gitignore` for personal use

See example in [2c.TASKS_EXAMPLE.md](2c.TASKS_EXAMPLE.md)

## 5. Reusable prompts (EXPERIMENTAL)

### Option 1: Using Prompts Folder
1. Create `prompts` folder in `.github` folder
2. Create `<prompt_name>.prompt.md` file in `prompts` folder
3. Add the prompt to the context (Add Context -> Prompt) or use hotkey

### Option 2: Using Command Palette
1. Open Command Palette (<kbd>⌘</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> on Mac / <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> on Windows)
2. Search for `Chat: Create Prompt` (workspace) or `Chat: Create User Prompt` (user)
3. Enter prompt name
4. Add the prompt to the context (Add Context -> Prompt) or use hotkey

### Example Prompt

Your goal is to generate a new React form component.

Ask for the form name and fields if not provided.

Requirements for the form:
* Use form design system components: [design-system/Form.md](../docs/design-system/Form.md)
* Use `react-hook-form` for form state management:
* Always define TypeScript types for your form data
* Prefer *uncontrolled* components using register
* Use `defaultValues` to prevent unnecessary rerenders
* Use `yup` for validation:
* Create reusable validation schemas in separate files
* Use TypeScript types to ensure type safety
* Customize UX-friendly validation rules
